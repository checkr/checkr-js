var Checkr={rootUrl:"https://api.checkr.com",timeout:3e4,publishableKey:null,setPublishableKey:function(e){this.publishableKey=e},jsonp:function(e,i){var t="checkr_jsonp_"+Math.random().toString().substr(2),a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e.replace("{callback}",t);var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n),window[t]=function(e,t){try{i(e,t)}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}a.parentNode.removeChild(a)}},makeUrl:function(e,i){return Checkr.rootUrl+e+"?callback={callback}&publishable_key="+encodeURIComponent(Checkr.publishableKey)+"&data="+encodeURIComponent(JSON.stringify(i))},isValidPublishableKey:function(){return this.publishableKey&&"string"==typeof this.publishableKey?/\s/g.test(this.publishableKey)?!1:!0:!1},makeCallback:function(e){function i(i){if(!t){if(t=!0,!i)return void e(500,{error:"Unable to connect to the Checkr servers"});var a=JSON.parse(i),n=a.status;delete a.status,e(n,a)}}var t=!1;return setTimeout(i,Checkr.timeout),i},candidate:{isSSNValid:function(e){return e?/^\d{3}-\d{2}-\d{4}$/.test(e):!1},isFirstNameValid:function(e){return e?/\w{2,}/.test(e):!1},isLastNameValid:function(e){return e?/\w{2,}/.test(e):!1},isPhoneValid:function(e){return e?10===e.match(/\d/g).length:!1},isEmailValid:function(e){return e?/^[^@<\s>]+@[^@<\s>]+$/.test(e):!1},isMiddleNameEmpty:function(e){return!e||!/\w{1,}/.test(e)},isMiddleNameValid:function(e,i){return i!=this.isMiddleNameEmpty()},validate:function(e){for(var i=["first_name","last_name","dob","ssn","email","phone"],t=[],a=0;a<i.length;a++){var n=i[a];e&&n in e&&e[n]||t.push(n+" is missing")}return this.isSSNValid(e.ssn)||t.push("invalid ssn"),this.isFirstNameValid(e.first_name)||t.push("invalid first name"),this.isLastNameValid(e.last_name)||t.push("invalid last name"),this.isPhoneValid(e.phone)||t.push("invalid phone"),this.isEmailValid(e.email)||t.push("invalid email"),this.isMiddleNameValid(e.middle_name,e.no_middle_name)||t.push("invalid middle name"),t},create:function(e,i){if(!e){var t="No data supplied";if(!i)throw t;return void i(400,{error:t})}var a=this.validate(e);a.length>0?i(400,{error:a.join(", ")}):Checkr.jsonp(Checkr.makeUrl("/jsonp/candidates",e),Checkr.makeCallback(i))}}};
