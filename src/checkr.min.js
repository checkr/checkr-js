var Checkr={rootUrl:"https://api.checkr.com",timeout:3e4,publishableKey:null,setPublishableKey:function(e){this.publishableKey=e},jsonp:function(e,t){var n="checkr_jsonp_"+Math.random().toString().substr(2);var r=document.createElement("script");r.type="text/javascript";r.async=true;r.src=e.replace("{callback}",n);var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i);window[n]=function(e,n){try{t(e,n)}catch(i){if(typeof console!=="undefined"&&console.error){console.error(i)}}r.parentNode.removeChild(r)}},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},makeUrl:function(e,t){return Checkr.rootUrl+e+"?callback={callback}&publishable_key="+encodeURIComponent(Checkr.publishableKey)+"&data="+encodeURIComponent(JSON.stringify(t))},isValidPublishableKey:function(){if(!this.publishableKey||typeof this.publishableKey!="string")return false;if(/\s/g.test(this.publishableKey))return false;return true},makeCallback:function(e){function n(n){if(t){return}t=true;if(!n){e(500,{error:"Unable to connect to the Checkr servers"});return}var r=JSON.parse(n);var i=r.status;delete r.status;e(i,r)}var t=false;setTimeout(n,Checkr.timeout);return n},candidate:{isSSNValid:function(e){if(!e)return false;return/^\d{3}-\d{2}-\d{4}$/.test(e)},isFirstNameValid:function(e){if(!e)return false;return/\w{2,}/.test(e)},isLastNameValid:function(e){if(!e)return false;return/\w{2,}/.test(e)},isPhoneValid:function(e){if(!e)return false;return e.match(/\d/g).length===10},isEmailValid:function(e){if(!e)return false;return/^[^@<\s>]+@[^@<\s>]+$/.test(e)},validate:function(e){var t=["first_name","last_name","dob","ssn","email","phone"];var n=[];for(var r=0;r<t.length;r++){var i=t[r];if(!e||!(i in e)||!e[i]){n.push(i+" is missing")}}if(!this.isSSNValid(e.ssn)){n.push("invalid ssn")}if(!this.isFirstNameValid(e.first_name)){n.push("invalid first name")}if(!this.isLastNameValid(e.last_name)){n.push("invalid last name")}if(!this.isPhoneValid(e.phone)){n.push("invalid phone")}if(!this.isEmailValid(e.email)){n.push("invalid email")}return n},create:function(e,t){if(!e){var n="No data supplied";if(!t){throw n}else{t(400,{error:n})}return}var r=this.validate(e);if(r.length>0){t(400,{error:r.join(", ")})}else{Checkr.jsonp(Checkr.makeUrl("/jsonp/candidates",e),Checkr.makeCallback(t))}}}}
